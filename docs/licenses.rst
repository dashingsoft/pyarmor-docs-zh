==================
 许可模式和许可证
==================

.. contents:: 内容
   :depth: 2
   :local:
   :backlinks: top

.. highlight:: console

简介
====

本文档仅适用于 `Pyarmor`_ 8.0 之后的版本。

下载和安装本软件表示自动接受试用许可协议，试用版本有如下的限制

a. 加密功能对脚本大小有限制，不能加密超过限制的大脚本。
b. 混淆字符串功能在试用版中无法使用。
c. RFT 加密模式，BCC 加密模式在试用版无法使用。
d. 可以使用本软件加密非商业用途的脚本，未经许可不得用于商业用途。
e. 不可以使用本软件提供任何形式的加密服务，不管是通过应用程序还是网络服务。

试用版本中功能限制，需要通过许可授权来解锁相关功能。

许可模式
========

许可授权需要通过购买相应的许可证来获取，购买许可证可以通过指定的网站购买。

本软件提供三种许可证，分别解锁不同的功能

* 基础版许可证

  基础版许可证没有加密脚本大小的限制，可以使用字符串混淆功能

* 专家版许可证

  专家版许可证除了具备基础版的功能外，也支持 RFT 加密模式，BCC 加密模式。

* 集团版许可证

  集团版许可证具备专家版的所有功能，并且加密的时候也不需要联网验证许可证。

基础版许可证和专家版许可证加密的时候需要进行联网验证许可证。

不管哪一种许可证，运行加密脚本的时候都无需验证许可证，本软件对于加密脚本的运行没有任何控制和限制。

每一个许可证都有一个 18 位字符长度唯一的编号，并授权给有且只有一种产品使用。也就是说，任何一种使用本软件进行保护的产品都有自己唯一的许可证编号，不允许两种不同产品使用相同的许可证编号。

一种产品在本协议中指的是独立销售的软件所有组成部分，包括开发需要的各种设备，以及提供支持的服务器，云服务器等。一种产品也包括产品的当前版本，历史版本，以及将来的升级版本。一种产品也包括基础功能相同，组合不同特殊功能而形成的不同版本的产品，这种产品的特征是不同版本对外销售名称一样，只是通过辅助名称等来进行区分。

同一个许可下面，同时使用本软件的设备数目不超过 100 个。同时使用本软件是指从现在开始在 24 小时内曾经运行 pyarmor 命令的设备。这里的设备是指安装 Pyarmor 并使用 Pyarmor 对脚本进行加密的设备，不是指运行加密脚本的客户机器。

关于许可的更详细说明，请阅读 `Pyarmor 最终用户许可协议`_

**关于一种产品的示例说明**

如果不是用于销售，那么所有的 Python 脚本都属于一种产品，这里所指的产品都是指用于销售的软件。

Pyarmor 是一种产品，它所包含的 Pyarmor 基础版，专家版和集团版 都属于 Pyarmor 这一种产品，另外为 Pyarmor 提供图形界面的工具 pyarmor-webui 也属于 Pyarmor 这一种产品， Pyarmor 的后台订单系统是用 django 开发的一个程序，这也属于 Pyarmor 这一种产品。开发 Pyarmor 所使用的笔记本电脑，测试 Pyarmor 使用的台式机，以及运行后台订单系统的云服务器都属于 Pyarmor 这一种产品。

Microsoft Office 产品系列不是一种产品，它包括的各个产品，例如 Microsoft Word 和 Microsoft Excel 是功能完全不同的两个产品，所以 Microsoft Office 不是一种产品。而 Microsoft Word 是一种产品，它的各个版本系列 Micorsoft Word 2003，Work 2007 等也都属于 Microsoft word 这一种产品。

不同许可证的功能列表
--------------------

.. table:: 表-1. 许可证功能表
   :widths: auto

   ===============  ========   ========   =========   ========  ==================
       功能          试用版     基础版      专家版      集团版      备注说明
   ===============  ========   ========   =========   ========  ==================
   基本加密功能         有           有          有         有       [#]_
   脚本有效期          有           有          有         有        [#]_
   绑定到设备          有           有          有         有        [#]_
   JIT 保护           有           有          有         有        [#]_
   Themedia 保护      有           有          有         有        [#]_
   Assert 保护        有           有          有         有        [#]_
   大脚本文件          无           有          有         有         [#]_
   混淆字符串          无          有          有         有         [#]_
   RFT加密模式         无          无         有          有         [#]_
   BCC加密模式         无          无         有          有         [#]_
   ===============  ========   ========   =========   ========  ==================

.. rubric:: notes

.. [#] 基本加密功能，是指没有使用任何选项的加密功能。
.. [#] 脚本有效期，是指能够限制加密脚本运行有效期的功能。
.. [#] 绑定到设备，是指能够限制加密脚本运行在指定设备的功能。
.. [#] JIT 保护，是指使用动态代码生成机制对加密脚本进行保护的功能。
.. [#] Themedia 保护，是指使用第三方工具 Themedia 对 Widnows 动态库进行保护的功能。
.. [#] Assert 保护，是指保护加密脚本不会被替换或者非法注入的保护功能。
.. [#] 大脚本文件，是指加密脚本的大小超过一定值，“无”表示不能加密大脚本，“有”表示可以加密大脚本。
.. [#] 混淆字符串，是指对脚本中的字符串常量进行混淆保护的功能。
.. [#] RFT 加密模式，是指通过重命名脚本中的函数，类，方法和变量的名称来保护脚本的功能。
.. [#] BCC 加密模式，是指把 Python 脚本中部分函数转换成为对应的 C 函数，通过编译直接生成机器指令代码，从而对脚本进行保护的功能。

购买
====

在浏览器中打开 Pyarmor 官网的购物车，支持微信和支付宝

    https://pyarmor.dashingsoft.com/cart/order.html

在购物车页面选择需要的许可证类型，填写注册名称，并完成支付。

支付成功之后，在一个工作日之内激活文件会发送到注册邮箱，请按照激活文件中的方法和步骤完成注册和激活。

购买软件许可的费用是一次性收费，可以永久在购买本软件时候的版本中使用，但是许可证可能在任何一个升级版本中失效，许可人不承诺许可证可以在今后所有的升级版本中使用。

.. list-table:: 表-2. 不同授权模式的价格列表（中国）
   :name: 授权模式价格表1
   :header-rows: 1

   * - 授权模式
     - 不含税价格（人民币元）
     - 含税价格（人民币元）
     - 说明
   * - 基础版
     - 298
     - 359
     -
   * - 专家版
     - 512
     - 562
     -
   * - 集团版
     - 868
     - 918
     -

如果需要使用信用卡或者 Paypal 进行支持，在浏览器中 MyCommerce 官网的购物车进行购买，这里的价格单位是美元，并且不能开国内增值税发票，只提供国际通用的电子发票

    https://order.mycommerce.com/product?vendorid=200089125&productid=301044051

.. list-table:: 表-3. 不同授权模式的价格列表（国外）
   :name: 授权模式价格表2
   :header-rows: 1

   * - 授权模式
     - 不含税价格（美元）
     - 说明
   * - 基础版
     - 52
     -
   * - 专家版
     - 89
     -
   * - 集团版
     - 158
     -

.. _upgrading old license:

升级老版本许可证
================

不是所有的老版本的许可证都可以升级为新的许可证。

符合下列条件的老版本许可证可以免费升级到 Pyarmor 基础版许可证：

* 遵循新的 `Pyarmor 最终用户许可协议`_
* 原来的许可证编号是以 ``pyarmor-vax-`` 开头的
* 原来许可证的注册文件 ``pyarmor-regcode-xxxx.txt`` 不能被使用超过 100 次
* 升级的时候服务器没有返回错误信息

如果升级的时候出现问题，那么无法免费升级，请购买新的许可证。

如果需要升级到 Pyarmor 专家版，除了满足以上的条件外，还需要额外的费用。

.. list-table:: 表-4. 升级到 Pyarmor 8.0+ 不同授权模式的价格列表（国内）
   :name: 升级价格表1
   :header-rows: 1

   * - 授权模式
     - 升级价格（人民币）
     - 说明
   * - 基础版
     - 0
     - 无需费用，满足条件可以免费升级
   * - 专家版
     - 300
     -
   * - 集团版
     -
     - 老版本不支持直接升级到集团版

免费升级到基础版
-----------------

首先找到原来的许可证激活文件 ``pyarmor-regcode-xxxx.txt``

然后在一台已经注册过 Pyarmor 的机器上安装最新版本的 Pyarmor 8.0+，注意卸载原来的版本的是要保留原来的注册信息，也就是说，不要删除存放注册文件信息的路径，默认情况下注册信息是存放在 :file:`~/.pyarmor`

而对于商业应用，按照新的 `Pyarmor 最终用户许可协议`_ ，需要为每一个许可证指定产品名称。这也意味着，如果老的许可证是被用于多种产品的话，升级之后就只能用于其中的一个，其他产品还需要购买新的许可证。

假定使用许可证的产品名称是 ``Robot Studio`` ，那么使用下面的命令进行升级::

    $ pyarmor reg -u -p "Robot Studio" pyarmor-regcode-xxxx.txt

如果老的许可证已经设定过产品名称，并且和指定的名称不一致，那么无法进行升级。或者直接运行下面的命令升级::

    $ pyarmor reg -u pyarmor-regcode-xxxx.txt

如果升级后的许可证只用于内部使用，也可以直接使用下面的命令升级::

    $ pyarmor reg -u pyarmor-regcode-xxxx.txt


运行下面的命令检查升级后的许可证::

    $ pyarmor -v

付费升级到专家版
----------------

在浏览器中打开 Pyarmor 官网的购物车，支持微信和支付宝

    https://pyarmor.dashingsoft.com/cart/order.html

在购物车页面选择购买的许可证类型为 ``升级到专家版`` ，填写注册名称，并完成支付。

支付成功之后，在一个工作日之内会激活文件会发送到注册邮箱，请按照激活文件中的方法和步骤完成升级操作。

.. 无法提供服务的补偿
    不满一年，全额退款
    小于2年，退款 50%
    小于3年，退款 10%
    大于3年，不在退款

.. include:: _common_definitions.txt
