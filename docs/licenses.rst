==================
 许可模式和许可证
==================

.. contents:: 内容
   :depth: 2
   :local:
   :backlinks: top

.. highlight:: console

简介
====

本文档仅适用于 `Pyarmor`_ 8.0 之后的版本。

下载和安装本软件表示自动接受试用许可协议，试用版本有如下的限制

(1) 加密功能对脚本大小有限制，不能加密超过限制的大脚本。
(2) 混淆字符串功能在试用版中无法使用。
(3) RFT 加密模式，BCC 加密模式在试用版无法使用。
(4) 可以使用本软件加密非商业用途的脚本，未经许可不得用于商业用途。
(5) 运行辅助包的名称 "pyarmor_runtime_000000" 不可以被设置和修改
(6) 不可以使用本软件提供任何形式的加密服务，不管是通过应用程序还是网络服务。
(7) 不支持 obf-code 大于 1 的任何加密模式

试用版本中功能限制，需要通过许可授权来解锁相关功能。

许可模式
========

许可授权需要通过购买相应的许可证来获取，购买许可证可以通过指定的网站购买。

本软件提供三种许可证，分别解锁不同的功能

* 基础版许可证

  基础版许可证解锁限制 (1) (2) (5) (7).

  加密脚本的时候需要在线验证许可证

* 专家版许可证

  专家版许可证解锁限制 (1) (2) (3) (4) (5) (7).

  加密脚本的时候需要在线验证许可证

* 集团版许可证

  集团版许可证解锁限制 (1) (2) (3) (4) (5) (7).

  加密脚本不需要在线验证许可证

不管哪一种许可证，运行加密脚本的时候都无需验证许可证，本软件对于加密脚本的运行没有任何控制和限制。

每一个许可证都有一个 18 位字符长度唯一的编号，并授权给有且只有一种产品使用。也就是说，任何一种使用本软件进行保护的产品都有自己唯一的许可证编号，不允许两种不同产品使用相同的许可证编号。

如果用户有多种产品并且已经为第一种产品购买了许可证，那么当用户的第二种产品的销售收入小于当前许可证费用的10倍，那么第二种产品可以暂时使用第一种产品的许可证。一旦销售收入超过许可证费用的10倍，第二种产品就必须购买自己的许可证。这个原则也适用于用户的其他所有产品。

一种产品在本协议中指的是独立销售的软件所有组成部分，包括开发需要的各种设备，以及提供支持的服务器，云服务器等。一种产品也包括产品的当前版本，历史版本，以及将来的升级版本。一种产品也包括基础功能相同，组合不同特殊功能而形成的不同版本的产品，这种产品的特征是不同版本对外销售名称一样，只是通过辅助名称等来进行区分。

同一个许可下面，同时使用本软件的设备数目不超过 100 个。同时使用本软件是指从现在开始在 24 小时内曾经运行 pyarmor 命令的设备。这里的设备是指安装 Pyarmor 并使用 Pyarmor 对脚本进行加密的设备，不是指运行加密脚本的客户机器。

关于许可的更详细说明，请阅读 `Pyarmor 最终用户许可协议`_

**关于一种产品的示例说明**

不用于销售的所有的 Python 脚本都属于一种特殊的产品 ``non-profits``

Pyarmor 是一种产品，它所包含
- Pyarmor 基础版，专家版和集团版 都属于 Pyarmor 这一种产品
- pyarmor-webui，为 Pyarmor 提供图形界面的工具，也属于 Pyarmor 这一种产品
- Pyarmor 的后台订单系统是用 django 开发的一个程序，这也属于 Pyarmor 这一种产品
- 开发 Pyarmor 所使用的笔记本电脑，测试 Pyarmor 使用的台式机，以及运行后台订单系统的云服务器都属于 Pyarmor 这一种产品
- Pyarmor 7.x 和 Pyarmor 8.x 也都属于 Pyarmor 一种产品。

Microsoft Office 产品系列不是一种产品，它包括的各个产品，例如 Microsoft Word 和 Microsoft Excel 是功能完全不同的两个产品，所以 Microsoft Office 不是一种产品。而 Microsoft Word 是一种产品，它的各个版本系列 Micorsoft Word 2003，Word 2007 等也都属于 Microsoft word 这一种产品。

不同许可证的功能列表
--------------------

.. table:: 表-1. 许可证功能表
   :widths: auto

   ===============  ========   ========   =========   ========  ==================
       功能          试用版     基础版      专家版      集团版      备注说明
   ===============  ========   ========   =========   ========  ==================
   基本加密功能         有           有          有         有       [#]_
   脚本有效期          有           有          有         有        [#]_
   绑定到设备          有           有          有         有        [#]_
   JIT 保护           有           有          有         有        [#]_
   Themedia 保护      有           有          有         有        [#]_
   Assert 保护        有           有          有         有        [#]_
   大脚本文件          无           有          有         有         [#]_
   混淆字符串          无          有          有         有         [#]_
   obf-code > 1      无          有          有         有         [#]_
   RFT加密模式         无          无         有          有         [#]_
   BCC加密模式         无          无         有          有         [#]_
   ===============  ========   ========   =========   ========  ==================

.. rubric:: notes

.. [#] 基本加密功能，是指没有使用任何选项的加密功能。
.. [#] 脚本有效期，是指能够限制加密脚本运行有效期的功能。
.. [#] 绑定到设备，是指能够限制加密脚本运行在指定设备的功能。
.. [#] JIT 保护，是指使用动态代码生成机制对加密脚本进行保护的功能。
.. [#] Themedia 保护，是指使用第三方工具 Themedia 对 Widnows 动态库进行保护的功能。
.. [#] Assert 保护，是指保护加密脚本不会被替换或者非法注入的保护功能。
.. [#] 大脚本文件，是指加密脚本的大小超过一定值，“无”表示不能加密大脚本，“有”表示可以加密大脚本。
.. [#] 混淆字符串，是指对脚本中的字符串常量进行混淆保护的功能。
.. [#] 从 Pyarmor 8.2 开始，obf-code 支持使用多种不同方式对函数进行加密
.. [#] RFT 加密模式，是指通过重命名脚本中的函数，类，方法和变量的名称来保护脚本的功能。
.. [#] BCC 加密模式，是指把 Python 脚本中部分函数转换成为对应的 C 函数，通过编译直接生成机器指令代码，从而对脚本进行保护的功能。

购买
====

在浏览器中打开 Pyarmor 官网的购物车，支持微信和支付宝

    https://pyarmor.dashingsoft.com/cart/order.html

在购物车页面选择需要的许可证类型，填写注册名称，并完成支付。

支付成功之后，在一个工作日之内激活文件会发送到注册邮箱，请按照激活文件中的方法和步骤完成注册和激活，或者参考这里 :doc:`../how-to/register` 。

购买软件许可的费用是一次性收费，可以永久在购买本软件时候的版本中使用，但是许可证可能在任何一个升级版本中失效，Pyarmor 不承诺许可证可以在今后所有的升级版本中使用。

.. list-table:: 表-2. 不同授权模式的价格列表（中国）
   :name: 授权模式价格表1
   :header-rows: 1

   * - 授权模式
     - 不含税价格（人民币元）
     - 含税价格（人民币元）
     - 说明
   * - 基础版
     - 298
     - 359
     -
   * - 专家版
     - 512
     - 562
     -
   * - 集团版
     - 868
     - 918
     -

如果需要使用信用卡或者 Paypal 进行支付，可以直接在 MyCommerce 官网进行购买，这里的价格单位是美元，并且不能开国内增值税发票，只提供国际通用的电子发票（订单，发票相关事宜全部由 MyCommerce 处理）

    https://order.mycommerce.com/product?vendorid=200089125&productid=301044051

.. list-table:: 表-3. 不同授权模式的价格列表（国外）
   :name: 授权模式价格表2
   :header-rows: 1

   * - 授权模式
     - 不含税价格（美元）
     - 说明
   * - 基础版
     - 52
     -
   * - 专家版
     - 89
     -
   * - 集团版
     - 158
     -

.. _upgrading old license:

升级老版本许可证
================

不是所有的老版本的许可证都可以升级为新的许可证。

符合下列条件的老版本许可证可以免费升级到 Pyarmor 基础版许可证：

* 遵循新的 `Pyarmor 最终用户许可协议`_
* 原来的许可证编号是以 ``pyarmor-vax-`` 开头的
* 原来许可证的注册文件 ``pyarmor-regcode-xxxx.txt`` 存在且不能被使用超过 100 次

如果无法免费升级，请购买新的许可证。

老版本的许可证不支持升级到专家版和集团版。

免费升级到基础版
-----------------

首先找到原来的许可证激活文件 ``pyarmor-regcode-xxxx.txt``

然后安装 Pyarmor 8.2+

按照新的 `Pyarmor 最终用户许可协议`_ ，需要为每一个许可证指定产品名称。这也意味着，如果老的许可证是被用于多种产品的话，升级之后就只能用于其中的一个，其他产品还需要购买新的许可证。

假定使用许可证的产品名称是 ``XXX`` ，那么使用下面的命令进行升级::

    $ pyarmor reg -u -p "XXX" pyarmor-regcode-xxxx.txt

升级成功之后会生成新的 :term:`注册文件`

在其他设备直接使用新的 :term:`注册文件` 进行注册::

    $ pyarmor reg pyarmor-regfile-xxxx.zip

运行下面的命令检查升级后的许可证::

    $ pyarmor -v

注册成功之后所有的加密操作自动应用当前许可证，每一次加密操作需要联网验证许可证。

..
  付费升级到专家版
  ----------------

  如果需要升级到 Pyarmor 专家版，除了满足以上的条件外，还需要额外的费用。

  .. list-table:: 表-4. 升级到 Pyarmor 8.0+ 不同授权模式的价格列表（国内）
     :name: 升级价格表1
     :header-rows: 1

     * - 授权模式
       - 升级价格（人民币）
       - 说明
     * - 基础版
       - 0
       - 无需费用，满足条件可以免费升级
     * - 专家版
       - 300
       -
     * - 集团版
       -
       - 老版本不支持直接升级到集团版

  在浏览器中打开 Pyarmor 官网的购物车，支持微信和支付宝

      https://pyarmor.dashingsoft.com/cart/order.html

  在购物车页面选择购买的许可证类型为 ``升级到专家版`` ，填写注册名称，并完成支付。

  支付成功之后，在一个工作日之内 :term:`激活文件` 会发送到注册邮箱，激活文件中的有详细的升级方法和步骤。

  升级需要互联网，Pyarmor 8.2+，以及老的许可证，首先确认 Pyarmor 当前版本::

      pyarmor -v

  其次确认老许可证存在::

      pyarmor-7 -v

  如果不存在首先注册老的许可证文件，注意这个文件是以前购买的许可证文件::

      pyarmor-7 register pyarmor-regcode-kkkk.txt

  升级需要指定产品名称，假定产品名称为 ``XXX`` ，那么使用下面的命令进行升级::

      $ pyarmor reg -u -p "XXX" pyarmor-regcode-to-pro.txt

  升级成功之后会生成新的 :term:`注册文件` 。

  升级只需要在任何一台设备执行一次即可，在其他设备直接使用新的 :term:`注册文件` 进行注册::

      $ pyarmor reg pyarmor-regfile-xxxx.zip

  运行下面的命令检查升级后的许可证::

      $ pyarmor -v

  升级之后所有加密操作自动应用新的许可证，每一次加密操作需要联网验证许可证。

.. 无法提供服务的补偿
    不满一年，全额退款
    小于2年，退款 50%
    大于2年，不在退款

.. include:: _common_definitions.txt
